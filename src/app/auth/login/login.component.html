<div class="lds-ring spin-center" *ngIf="isLoading">
  <div></div>
  <div></div>
  <div></div>
  <div></div>
</div>

<div class="main-div" *ngIf="!isLoading">
  <mat-card class="mat-elevation-z4">
    <mat-card-header
      ><mat-card-title><h2>Sign In</h2></mat-card-title>
      <mat-card-subtitle
        ><p class="sub-title">
          <i class="fas fa-user fa-sm"></i>
          Sign into Your Account
        </p></mat-card-subtitle
      ></mat-card-header
    >
    <mat-card-content>
      <form #loginForm="ngForm" (ngSubmit)="onSubmit(loginForm.value)">
        <mat-form-field appearance="outline">
          <mat-label>Email</mat-label>
          <input
            matInput
            name="email"
            ngModel
            type="email"
            placeholder="Email Address"
            #emailInput="ngModel"
            required
            email
          />
        </mat-form-field>
        <div
          *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)"
        >
          <div *ngIf="emailInput.errors?.required">
            <mat-error>Please enter your email address!</mat-error>
          </div>
          <div *ngIf="emailInput.errors?.email">
            <mat-error>Please enter a valid email!</mat-error>
          </div>
        </div>
        <br
          *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)"
        />
        <mat-form-field appearance="outline">
          <mat-label>Password</mat-label>
          <input
            matInput
            name="password"
            ngModel
            type="password"
            placeholder="Password"
            #passwordInput="ngModel"
            required
            minlength="6"
          />
        </mat-form-field>
        <div
          *ngIf="
            passwordInput.invalid &&
            (passwordInput.dirty || passwordInput.touched)
          "
        >
          <div *ngIf="passwordInput.errors?.required">
            <mat-error>Please enter your password!</mat-error>
          </div>
          <div *ngIf="passwordInput.errors?.minlength">
            <mat-error
              >Your password can't be less than 6 characters!</mat-error
            >
          </div>
        </div>
        <br
          *ngIf="
            passwordInput.invalid &&
            (passwordInput.dirty || passwordInput.touched)
          "
        />
        <div *ngIf="loginErrors && !(loginForm.touched || loginForm.dirty)">
          <mat-error>Invalid login credentials!</mat-error>
        </div>
        <br />
        <button mat-raised-button type="submit" [disabled]="loginForm.invalid">
          Login
        </button>
      </form>
    </mat-card-content>
    <p class="info-text mat-body-1">
      Don't have an account?
      <a [routerLink]="['/auth', 'register']" class="register-link">Sign Up</a>
    </p>
  </mat-card>
</div>
